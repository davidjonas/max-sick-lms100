PROJECT(LMS1xx-external)
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

FIND_LIBRARY(MAX_API MaxAPI)

ADD_LIBRARY(tcpclient MODULE tcpclient.c)
TARGET_LINK_LIBRARIES(tcpclient ${MAX_API})
SET(BUNDLE_CONTENTS tcpclient.mxo/Contents)
SET(BUNDLE_MACOS ${BUNDLE_CONTENTS}/MacOS)
FILE(MAKE_DIRECTORY ${CMAKE_BINARY_DIR}/${BUNDLE_MACOS})
SET_TARGET_PROPERTIES(tcpclient PROPERTIES PREFIX "" SUFFIX ""
        OUTPUT_NAME ${BUNDLE_MACOS}/tcpclient)

SET(MACOSX_BUNDLE_EXECUTABLE_NAME tcpclient)
SET(MACOSX_BUNDLE_GUI_IDENTIFIER nl.v2.tcpclient)
SET(MACOSX_BUNDLE_PACKAGE_TYPE iLaX)
SET(MACOSX_BUNDLE_SIGNATURE max2)
CONFIGURE_FILE( ${CMAKE_SOURCE_DIR}/Info.plist.in ${BUNDLE_CONTENTS}/Info.plist)
FILE(WRITE ${CMAKE_BINARY_DIR}/${BUNDLE_CONTENTS}/PkgInfo
        "${MACOSX_BUNDLE_PACKAGE_TYPE}${MACOSX_BUNDLE_SIGNATURE}")
